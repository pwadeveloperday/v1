{"version":3,"file":"sample-ac.5537fd73.js","sources":["../../src/script/pages/sample-ac.ts"],"sourcesContent":["import { LitElement, css, html } from 'lit';\nimport { customElement, query } from 'lit/decorators.js';\n\n@customElement('sample-ac')\nexport class SampleAC extends LitElement {\n  @query('#msg') _msg: HTMLDivElement;\n  @query('#paste') _p: HTMLDivElement;\n\n  async _loadBlob(fileName: RequestInfo | URL) {\n    const fetched = await fetch(fileName);\n    return await fetched.blob();\n  }\n\n  async _copy() {\n    try {\n      const url = 'https://pwadev.io/assets/sample/pwa-fugu.png';\n      const blobInput = await this._loadBlob(url);\n      const clipboardItemInput = new ClipboardItem({'image/png' : blobInput});\n      await navigator.clipboard.write([clipboardItemInput]);\n      this._msg.innerHTML = '图片已复制';\n    } catch(e) {\n      this._msg.innerHTML = e.message;\n    }\n  }\n\n  async _paste() {\n    try {\n      const clipboardItems = await navigator.clipboard.read();\n      console.log(clipboardItems);\n      const blobOutput = await clipboardItems[0].getType('image/png');\n      this._p.innerHTML = `\n        <image src='${window.URL.createObjectURL(blobOutput)}'>\n      `;\n      this._msg.innerHTML = '图片异步粘贴成功';\n    } catch(e) {\n      this._msg.innerHTML = e.message + ' Failed to read clipboard';\n    }\n  }\n \n  async _listener() {\n    navigator.clipboard.addEventListener('clipboardchange', async e => {\n      const text = await navigator.clipboard.getText();\n      this._msg.innerHTML = '剪切板更新: ' + text;\n    });\n  }\n\n  async connectedCallback() {\n    super.connectedCallback();\n    await this._listener();\n  }\n\n  static get styles() {\n    return css`\n    .about {\n      padding: 0 16px;\n      margin: 1rem 0 0rem 0;\n      color: #3d3d3d; \n    }\n\n    h2 {\n      font-size: 1.2rem;\n      color: rgba(0, 113, 197, 0.9);\n    }\n\n    fluent-card {\n      padding: 1rem;\n      margin-bottom: 1rem;\n      border-radius: 0px;\n      box-shadow: none;\n      background: rgba(255, 255, 255, 0.5);\n    }\n\n    fluent-card:hover {\n      background: rgba(255, 255, 255, 0.95);\n      color: #000;\n    }\n\n    fluent-card h3 {\n      margin: 10px auto;\n    }\n\n    fluent-card p {\n      margin: 10px auto;\n    }\n\n    @media(prefers-color-scheme: light) {\n    }\n\n    @media(prefers-color-scheme: dark) {\n    }\n\n    @media (min-width: 1024px) {\n    }\n\n    .spam {\n      display: none;\n    }\n\n    #status {\n      display: inline;\n    }\n\n    #result {\n      display: none;\n    }\n\n    .previewv {\n      margin: 16px auto;\n      text-align: left;\n      writing-mode:vertical-rl;\n      letter-spacing: 4px;\n      font-size: 1.8rem;\n    }\n\n    .previewv h3, .previewv h4 {\n      margin: 0 auto;\n    }\n\n    .previewv h4 {\n      margin-left: 16px;\n    }\n\n    a {\n      color: rgba(255, 255, 255, 0.9);\n\n      text-decoration: none;\n      border-bottom: 0px dashed rgba(255, 255, 255, 0.6);;\n    }\n\n    a:hover {\n      color: rgba(255, 255, 255, 1);\n      text-decoration: none;\n      border-bottom: 1px dashed rgba(255, 255, 255, 1);\n    }\n\n    #st {\n      padding: 0;\n    }\n\n    #st {\n      color: rgba(255, 255, 255, 0.9);\n    }\n\n    #st:hover {\n      color: rgba(255, 255, 255, 1.0);\n    }\n\n    .tut {\n      padding: 16px;\n      margin: 0 auto;\n      text-align: center;\n    }\n\n    .tut a {\n      color: rgba(0, 113, 197, 0.9);\n      text-decoration: none;\n      border-bottom: 1px dashed rgba(0, 113, 197, 0.6);\n    }\n\n    .tut a:hover {\n      color: rgba(0, 113, 197, 1);\n      border-bottom: 1px dashed rgba(0, 113, 197, 0.9);\n    }\n\n    .w3c {\n      padding: 16px;\n      margin: 0 auto;\n      text-align: center;\n      background-color: rgba(0, 199, 253, 0.9);\n    }\n    .w3c:hover {\n      background-color: rgba(0, 199, 253, 1.0);\n    }\n    \n    .imp {\n      display: flex;\n      flex-direction: row;\n      gap: 16px;\n      padding: 16px;\n      margin: 0 auto;\n      text-align: center;\n      background-color: rgba(0, 113, 197, 0.9);\n      align-items: center;\n      justify-content: space-around;\n    }\n    .imp:hover {\n      background-color: rgba(0, 113, 197, 1.0);\n    }\n\n    .imp .yes {\n      fill: rgba(255, 255, 255, 0.9);\n    }\n\n    .imp:hover .yes {\n      fill: rgba(255, 255, 255, 1.0);\n    }\n\n    .imp .no {\n      fill: rgba(255, 255, 255, 0.1);\n    }\n\n    .imp:hover .no {\n      fill: rgba(0, 0, 0, 0.4);\n    }\n\n    .des {\n      border: 1px solid rgba(255, 255, 255, 0.2);\n      padding: 2px 8px;\n    }\n\n    .cate, .det {\n      display: inline-block;\n    }\n    .cate .yes, .det .yes, .cate .no, .det .no{\n      display: inline-block;\n      width: 16px;\n      padding: 0 4px;\n    }\n\n    .cate {\n      border-right: 1px solid rgba(255, 255, 255, 0.2);\n      display: none;\n    }\n\n    .q {\n      margin: 16px auto;\n    }\n\n    .w3clogo {\n      margin-right: 6px;\n    }\n\n    .act div {\n      margin-top: 16px;\n    }\n\n    .act a {\n      color: rgba(0, 113, 197, 0.9);\n      cursor: pointer;\n      text-decoration: none;\n      border-bottom: 1px dashed rgba(0, 113, 197, 0.6);\n    }\n\n    .act a:hover {\n      color: rgba(0, 113, 197, 1);\n      border-bottom: 1px dashed rgba(0, 113, 197, 0.9);\n    }\n\n    #show {\n      display: none;\n    }\n\n    .act div {\n      background-color: rgba(0, 0, 0, 0.02);\n      padding: 8px 16px;\n    }\n\n    #paste img {\n      display: inline-block;\n      width: 320px;\n      margin: 0 auto;\n    }\n\n    fluent-card img {\n      margin: 8px 8px;\n    }\n\n    `;\n  }\n\n  constructor() {\n    super();\n  }\n\n  render() {\n    return html`\n      <app-header ?enableBack=\"${true}\"></app-header>\n      <div class=\"about\">\n        <fluent-breadcrumb>\n          <fluent-breadcrumb-item href=\"/\">首页</fluent-breadcrumb-item>\n          <fluent-breadcrumb-item href=\"/sample\">示例</fluent-breadcrumb-item>\n        </fluent-breadcrumb>\n        <h2>异步剪贴板 (Async Clipboard) API</h2>\n        提供了响应剪贴板命令（剪切、复制和粘贴）与异步读写系统剪贴板的能力，并取代使用 document.execCommand() 的剪贴板访问方式<br><br>\n        <fluent-card class=\"act\">\n          <button @click=\"${this._copy}\">复制</button> 写入到剪贴板<br><br>\n          <button @click=\"${this._paste}\">粘贴</button> 从剪贴板读出\n          <div>\n            也可以复制这些图片后，点击粘贴按钮<br><br>\n            <image src=\"/assets/logo/chromium.png\" width=\"50\" height=\"50\"></image>\n            <image src=\"/assets/logo/chrome.png\" width=\"50\" height=\"50\"></image>\n            <image src=\"/assets/logo/edge.png\" width=\"50\" height=\"50\"></image>\n            <image src=\"/assets/logo/safari.png\" width=\"50\" height=\"50\"></image>\n            <image src=\"/assets/logo/firefox.png\" width=\"50\" height=\"50\"></image>\n            <image src=\"/assets/logo/opera.png\" width=\"50\" height=\"50\"></image>\n            <image src=\"/assets/logo/vivaldi.png\" width=\"50\" height=\"50\"></image>\n          </div>\n          <div id=\"paste\"></div>\n          <div id=\"msg\"></div>\n        </fluent-card>\n        <fluent-card id=\"st\">\n          <div class=\"tut\">\n            <icon-webdev></icon-webdev> \n            <a href=\"https://web.dev/async-clipboard/\" title=\"Unblocking clipboard access \">\n              教程：解锁剪贴板访问\n            </a>\n          </div>\n          <div class=\"w3c\"><icon-w3c class=\"w3clogo\"></icon-w3c> <a href=\"https://www.w3.org/TR/clipboard-apis/#async-clipboard-api\" title=\"Asynchronous Clipboard API\">Asynchronous Clipboard API</a></div>\n          <div class=\"imp\">\n            <div class=\"des\">\n              <a href=\"https://chromestatus.com/feature/5074658793619456\" title=\"在 Chromium 76 版本支持\">🐡 M76</a>\n            </div>\n            <div class=\"des\">\n              <div class=\"det\">\n              <icon-chr class=\"yes\" title=\"Google Chrome 浏览器\"></icon-chr>\n              <icon-edg class=\"yes\" title=\"微软 Edge 浏览器\"></icon-edg> <icon-ope class=\"yes\" title=\"Opera 浏览器\"></icon-ope> <icon-viv class=\"yes\" title=\"Vivaldi 浏览器\"></icon-viv>\n              <icon-saf class=\"yes\" title=\"Apple Safari 浏览器\"></icon-saf> <icon-fir class=\"yes\" title=\"Mozilla Firefox 浏览器\"></icon-fir>\n              </div>\n            </div>\n            <div class=\"des\">\n              <div class=\"det\">\n                <icon-mac class=\"yes\" title=\"Mac\"></icon-mac> <icon-win class=\"yes\" title=\"Windows\"></icon-win> <icon-lin class=\"yes\" title=\"Linux\"></icon-lin> \n              </div>\n              <div class=\"det\">\n                <icon-and class=\"yes\" title=\"Android\"></icon-and> <icon-ios class=\"yes\" title=\"iOS\"></icon-ios>\n              </div>\n            </div>   \n          </div>\n        </fluent-card>\n      </div>\n      <app-footer></app-footer>\n    `;\n  }\n}\n"],"names":["LitElement","css","html","query","customElement"],"mappings":"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"}